<!--MODE EDIT-->
<ng-container *ngIf="!mode || mode === 'edit'">
  <!--Field-->
  <mat-form-field>
    <mat-label>Field</mat-label>
    <input matInput [formControl]="field.controls.field" />
  </mat-form-field>
  <div class="equals">
    =
    <div style="height: 22px; width: 1px"></div>
  </div>

  <!--Type-->

  <mat-form-field>
    <mat-label>Type</mat-label>
    <mat-select [formControl]="field.controls.type">
      <mat-select-trigger>
        <mat-chip [class]="field.controls.type.value">
          <span>
            {{ field.controls.type.value }}
          </span></mat-chip
        >
      </mat-select-trigger>

      <mat-option [value]="Type.Null">
        <mat-chip [class]="Type.Null"> {{ Type.Null }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.String">
        <mat-chip [class]="Type.String"> {{ Type.String }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.Number">
        <mat-chip [class]="Type.Number"> {{ Type.Number }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.Boolean">
        <mat-chip [class]="Type.Boolean"> {{ Type.Boolean }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.Timestamp">
        <mat-chip [class]="Type.Timestamp"> {{ Type.Timestamp }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.GeoPoint">
        <mat-chip [class]="Type.GeoPoint"> {{ Type.GeoPoint }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.Reference">
        <mat-chip [class]="Type.Reference"> {{ Type.Reference }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.Array">
        <mat-chip [class]="Type.Array"> {{ Type.Array }} </mat-chip>
      </mat-option>
      <mat-option [value]="Type.Map">
        <mat-chip [class]="Type.Map"> {{ Type.Map }} </mat-chip>
      </mat-option>
    </mat-select>
  </mat-form-field>
  <!--Value-->

  <!--NG Switch Based on Type-->
  <ng-container [ngSwitch]="field.controls.type.value">
    <!--String-->
    <div *ngSwitchCase="'string'" class="field-node">
      <mat-form-field>
        <mat-label>Value</mat-label>
        <input matInput type="search" [formControl]="field.controls.value" />
      </mat-form-field>
    </div>
    <!--Number-->
    <div *ngSwitchCase="'number'" class="field-node">
      <mat-form-field>
        <mat-label>Value</mat-label>
        <input matInput type="number" [formControl]="field.controls.value" />
      </mat-form-field>
    </div>
    <!--Boolean-->
    <div *ngSwitchCase="'boolean'" class="field-node">
      <mat-slide-toggle [formControl]="field.controls.value">
        <mat-label>Value</mat-label>
      </mat-slide-toggle>

      <!-- <mat-form-field>
        <mat-label>Value</mat-label>
      <mat-select [formControl]="field.controls.value">
        <mat-option [value]="true">true</mat-option>
        <mat-option [value]="false">false</mat-option>
      </mat-select>
    </mat-form-field> -->
    </div>
    <!--Map-->
    <div *ngSwitchCase="'map'" class="field-node">
      <mat-form-field>
        <mat-label>Value</mat-label>
        <input matInput [formControl]="field.controls.value" />
      </mat-form-field>
    </div>
    <!--Array-->
    <div *ngSwitchCase="'array'" class="field-node">
      <mat-form-field>
        <mat-label>Value</mat-label>
        <input matInput [formControl]="field.controls.value" />
      </mat-form-field>
    </div>
    <!--Null-->
    <div *ngSwitchCase="'null'" class="field-node">
      <mat-chip [class]="field.controls.type.value">
        <span>
          {{ field.controls.type.value }}
        </span>
      </mat-chip>
    </div>
    <!--Timestamp-->
    <div *ngSwitchCase="'timestamp'" class="field-node">
      <mat-form-field>
        <mat-label>Value</mat-label>
        <input
          matInput
          type="datetime-local"
          [formControl]="field.controls.value"
        />
      </mat-form-field>
    </div>
    <!--Geopoint-->
    <div *ngSwitchCase="'geopoint'" class="field-node">
      <mat-form-field>
        <mat-label>Value</mat-label>
        <input matInput [formControl]="field.controls.value" />
      </mat-form-field>
    </div>
    <!--Reference-->
    <div *ngSwitchCase="'reference'" class="field-node">
      <mat-form-field>
        <mat-label>Value</mat-label>
        <input matInput [formControl]="field.controls.value" />
      </mat-form-field>
    </div>
  </ng-container>

  <button
    mat-icon-button
    (click)="removeField(index)"
    color="accent"
    style="margin-bottom: 22px"
  >
    <mat-icon>remove_circle_outline</mat-icon>
  </button>
</ng-container>

<!--MODE VIEW-->
<ng-container *ngIf="mode === 'view'">
  <mat-list-item checkboxPosition="after">
    <!--Field-->
    <span matListItemTitle
      >{{ field.controls.field.value }}:

      <!--NG Switch Based on Type-->
      <ng-container [ngSwitch]="field.controls.type.value">
        <!--String-->
        <span *ngSwitchCase="'string'">
          {{ field.controls.value.value }}
        </span>
        <!--Number-->
        <span *ngSwitchCase="'number'">
          {{ field.controls.value.value }}
        </span>
        <!--Boolean-->
        <span *ngSwitchCase="'boolean'">
          {{ field.controls.value.value }}
        </span>
        <!--Map-->
        <span *ngSwitchCase="'map'">
          {{ field.controls.value.value | json }}
        </span>
        <!--Array-->
        <span *ngSwitchCase="'array'">
          {{ field.controls.value.value | json }}
        </span>
        <!--Null-->
        <span *ngSwitchCase="'null'">
          {{ field.controls.type.value }}
        </span>
        <!--Timestamp-->
        <span *ngSwitchCase="'timestamp'">
          {{ field.controls.value.value }}
        </span>
        <!--Geopoint-->
        <span *ngSwitchCase="'geopoint'">
          {{ field.controls.value.value }}
        </span>
        <!--Reference-->
        <span *ngSwitchCase="'reference'">
          {{ field.controls.value.value }}
        </span>
      </ng-container>
    </span>
    <!--Value-->

    <div matListItemMeta>
      <span class="view-only-field-type">
        ({{ field.controls.type.value }})
      </span>
    </div>

    <div matListItemIcon>
      <button mat-icon-button (click)="editField()">
        <mat-icon>edit</mat-icon>
      </button>

      <button mat-icon-button (click)="deleteField()">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
  </mat-list-item>
</ng-container>

<ng-template #arrayTemplate></ng-template>
<ng-template #mapTemplate></ng-template>
